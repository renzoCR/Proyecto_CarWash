<!DOCTYPE html>
<!-- saved from url=(0059)blob:https://codi.link/4f3ed6bb-d308-4f76-8fbf-538d4c81490d -->
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.23/css/dataTables.bootstrap4.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
	<link rel="stylesheet" th:href="@{/resources/datepicker/bootstrap-datepicker.css}">
	<link rel="stylesheet" th:href="@{/resources/alertifyjs/css/alertify.css}">
	<link rel="stylesheet" th:href="@{/resources/alertifyjs/css/alertify.min.css}"> 
	<style>
		body{
			font-family:verdana;
			font-size:12px;
		}
		
		.modal-header, h4, .close {
			background-color: #286090;
			color: white !important;
			text-align: center;
			font-size: 20px;
		}
	
		.form-control {
			height:30px!important;
			font-size:12px;
			  /*padding-left: 40px!important;*/
		}
		
		fieldset, legend {
		   all: revert;
		}
		
		.reset {
		    all: revert;
		}
		
		.btn-danger {
			margin:0px!important;
			height:30px!important;
			padding-top:3px!important;	
		}
		
		.btn-info {
			margin:0px!important;
			height:30px!important;
			padding-top:3px!important;	
		}

		.colorBloqueado{
			background:#F7EEC5;	
		}
		
		.form-control:focus {
			background:#F7EEC5;	
		}
	</style>
	<script src="https://kit.fontawesome.com/1da5200486.js" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.1/css/all.css" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
</head>
<body>		
	<div class="modal-body container">
		<form th:action="@{grabar}" method="POST">
			<div class="row">
			  <div class="col-2">
				<label for="inputPassword6" class="col-form-label"><b>Número</b></label>
				<input type="text" class="form-control colorBloqueado" name="numero">
			  </div>
			  <div class="col-3">
				<label for="inputPassword6" class="col-form-label"><b>Nombre</b></label>
				<input type="text" class="form-control " name="nombre" id="id-empleado" readonly="">
			  </div>
			  <div class="col-2">
				<label for="inputPassword6" class="col-form-label"><b>Fecha</b></label>
				<input type="datetime-local" class="form-control" name="fecha">
			  </div>
			</div>
			<hr>
			<div class="row mt-3">
				<div class="col-lg-6">
					<fieldset class="reset">
				  		<legend class="reset">Servicios</legend>
							<table id="tableBienes" class="table table-striped table-bordered mt-5" style="width:100%">
								<thead>
									<tr>
										<th>Código</th>
										<th>Nombre</th>
										<th>Descripción</th>
										<th>Precio</th>
										<th></th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="row:${servicios}">
										<td th:text="${row.codigo}"></td>
										<td th:text="${row.nombre}"></td>
										<td th:text="${row.descripcion}"></td>
										<td th:text="${row.precio}"></td>
										<td>
											<button type="button" class="btn btn-success btn-adicionar" th:id="${row.codigo}">
												<i class="fa-solid fa-plus"></i>
											</button>
										</td>
									</tr>
								</tbody>
							</table>
						</fieldset>	
					</div>
					<div class="col-lg-6">
						<fieldset class="reset">
						  <legend class="reset">Reservas/Solicitadas</legend>
							<table id="tableSolicitados" class="table table-striped mt-4" style="width:100%">
								<thead>
									<tr>
										<th>Código</th>
										<th>Nombre</th>
										<th>Cantidad</th>
										<th>Precio Total</th>
										<th></th>
									</tr>
								</thead>
								<tbody>
													
								</tbody>
							</table>
						</fieldset>	
					</div>
				</div>
				<hr>
			    <div class="modal-footer">
					<button type="submit" class="btn btn-primary"><i class="fas fa-save"></i></button>
					<button type="button" class="btn btn-secondary aux" data-bs-dismiss="modal"><i class="fa-regular fa-folder-closed"></i></button>
				</div>
		</form>
	</div>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
	<script src="https://cdn.bootcdn.net/ajax/libs/bootstrap-validator/0.5.3/js/bootstrapValidator.js"></script>
	<script th:src="@{/resources/datepicker/bootstrap-datepicker.js}"></script>     
	<script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.23/js/dataTables.bootstrap4.min.js"></script>
	<script src="https://kit.fontawesome.com/08aaa156fb.js" crossorigin="anonymous"></script>
	<script	src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
	<script src="https://kit.fontawesome.com/08aaa156fb.js" crossorigin="anonymous"></script>
	<script th:src="@{/resources/alertifyjs/alertify.js}"></script>
	<script th:src="@{/resources/alertifyjs/alertify.min.js}"></script>
	<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
	
	<script>
		
		$(document).on("click",".btn-adicionar",function(){
			let cod=$(this).parents("tr").find("td")[0].innerHTML;
			let nom=$(this).parents("tr").find("td")[1].innerHTML;
			let des=$(this).parents("tr").find("td")[2].innerHTML;
			let pre=$(this).parents("tr").find("td")[3].innerHTML;
		    $("#tableSolicitados tBody").empty();
			$.get("adicionar?codigo="+cod+"&nombre="+nom+"&descripcion="+des+"&precio="+pre,function(response){
				$.each(response,function(index,item){
					$("#tableSolicitados tbody").append(`<tr><td>${item.codigo}</td>
												             <td>${item.nombre}</td>
												             <td>${item.descripcion}</td>
												             <td>${item.precio}</td>
												 <td>
													<button type="button" class="btn btn-danger btn-eliminar" id="btn-eliminar-biean">
																	<i class="fas fa-trash-alt"></i>
													</button>
												 </td>`);
				})
			})
			$(this).prop("disabled", true);
		})
		
		
		$(document).on("click",".btn-eliminar",function(){
			let fila = $(this).closest("tr")
			let indiceFila = fila.index();
			let cod=$(this).parents("tr").find("td")[0].innerHTML;
		    $("#tableSolicitados tBody").empty();
			$.get("eliminar?codigo="+indiceFila,function(response){
				$.each(response,function(index,item){
					$("#tableSolicitados tbody").append(`<tr><td>${item.codigo}</td>
												             <td>${item.nombre}</td>
												             <td>${item.descripcion}</td>
												             <td>${item.precio}</td>
												 <td>
													<button type="button" class="btn btn-danger btn-eliminar" id="btn-eliminar-biean">
																	<i class="fas fa-trash-alt"></i>
													</button>
												 </td>`);
				})
			})
			
			document.getElementById("" + cod).disabled = false;
		})
		
	</script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>